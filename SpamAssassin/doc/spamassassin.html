<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>spamassassin - extensible email filter used to identify spam</title>
<link rev="made" href="mailto:jm@spamassassin.zones.apache.org" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<ul>

		<li><a href="#overview">OVERVIEW</a></li>
		<li><a href="#configuration">CONFIGURATION</a></li>
		<li><a href="#usage">USAGE</a></li>
		<li><a href="#default_plugins">DEFAULT PLUGINS</a></li>
	</ul>

	<li><a href="#web_sites">WEB SITES</a></li>
	<li><a href="#user_mailing_list">USER MAILING LIST</a></li>
	<li><a href="#configuration_files">CONFIGURATION FILES</a></li>
	<li><a href="#tagging">TAGGING</a></li>
	<ul>

		<li><a href="#tagging_for_spam_mails">TAGGING FOR SPAM MAILS</a></li>
		<li><a href="#default_tagging_for_all_mails">DEFAULT TAGGING FOR ALL MAILS</a></li>
	</ul>

	<li><a href="#installation">INSTALLATION</a></li>
	<li><a href="#developer_documentation">DEVELOPER DOCUMENTATION</a></li>
	<li><a href="#bugs">BUGS</a></li>
	<li><a href="#authors">AUTHORS</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<hr />
<h1><a name="name">NAME</a></h1>
<p>spamassassin - extensible email filter used to identify spam</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>SpamAssassin is an intelligent email filter which uses a diverse range of
tests to identify unsolicited bulk email, more commonly known as ``spam''.
These tests are applied to email headers and content to classify email
using advanced statistical methods.  In addition, SpamAssassin has a
modular architecture that allows other technologies to be quickly wielded
against spam and is designed for easy integration into virtually any email
system.</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>For ease of access, the SpamAssassin manual has been split up into
several sections.  If you're intending to read these straight through
for the first time, the suggested order will tend to reduce the number
of forward references.</p>
<p>Extensive additional documentation for SpamAssassin is available,
primarily on the SpamAssassin web site and wiki.</p>
<p>You should be able to view SpamAssassin's documentation with your <code>man(1)</code>
program or perldoc(1).</p>
<p>
</p>
<h2><a name="overview">OVERVIEW</a></h2>
<pre>
    spamassassin              SpamAssassin overview (this section)</pre>
<p>
</p>
<h2><a name="configuration">CONFIGURATION</a></h2>
<pre>
    Mail::SpamAssassin::Conf  SpamAssassin configuration files</pre>
<p>
</p>
<h2><a name="usage">USAGE</a></h2>
<pre>
    spamassassin-run          &quot;spamassassin&quot; front-end filtering script
    sa-learn                  train SpamAssassin's Bayesian classifier
    spamc                     client for spamd (faster than spamassassin)
    spamd                     spamassassin server (needed by spamc)</pre>
<p>
</p>
<h2><a name="default_plugins">DEFAULT PLUGINS</a></h2>
<pre>
    Mail::SpamAssassin::Plugin::AutoLearnThreshold
    Mail::SpamAssassin::Plugin::Bayes
    Mail::SpamAssassin::Plugin::BodyEval
    Mail::SpamAssassin::Plugin::Check
    Mail::SpamAssassin::Plugin::DKIM
    Mail::SpamAssassin::Plugin::DNSEval
    Mail::SpamAssassin::Plugin::FreeMail
    Mail::SpamAssassin::Plugin::HTMLEval
    Mail::SpamAssassin::Plugin::HTTPSMismatch
    Mail::SpamAssassin::Plugin::Hashcash
    Mail::SpamAssassin::Plugin::HeaderEval
    Mail::SpamAssassin::Plugin::ImageInfo
    Mail::SpamAssassin::Plugin::MIMEEval
    Mail::SpamAssassin::Plugin::MIMEHeader
    Mail::SpamAssassin::Plugin::Pyzor
    Mail::SpamAssassin::Plugin::Razor2
    Mail::SpamAssassin::Plugin::RelayEval
    Mail::SpamAssassin::Plugin::ReplaceTags
    Mail::SpamAssassin::Plugin::SPF
    Mail::SpamAssassin::Plugin::SpamCop
    Mail::SpamAssassin::Plugin::URIDNSBL
    Mail::SpamAssassin::Plugin::URIDetail
    Mail::SpamAssassin::Plugin::URIEval
    Mail::SpamAssassin::Plugin::VBounce
    Mail::SpamAssassin::Plugin::WLBLEval
    Mail::SpamAssassin::Plugin::WhiteListSubject</pre>
<p>
</p>
<hr />
<h1><a name="web_sites">WEB SITES</a></h1>
<pre>
    SpamAssassin web site:     <a href="http://spamassassin.apache.org/">http://spamassassin.apache.org/</a>
    Wiki-based documentation:  <a href="http://wiki.apache.org/spamassassin/">http://wiki.apache.org/spamassassin/</a></pre>
<p>
</p>
<hr />
<h1><a name="user_mailing_list">USER MAILING LIST</a></h1>
<p>A users mailing list exists where other experienced users are often able
to help and provide tips and advice.  Subscription instructions are
located on the SpamAssassin web site.</p>
<p>
</p>
<hr />
<h1><a name="configuration_files">CONFIGURATION FILES</a></h1>
<p>The SpamAssassin rule base, text templates, and rule description text
are loaded from configuration files.</p>
<p>Default configuration data is loaded from the first existing directory
in:</p>
<dl>
<dt><strong><a name="item__2flocal_2fperl586_2fvar_2fspamassassin_2f3_2e0030">/local/perl586/var/spamassassin/3.003001</a></strong><br />
</dt>
<dt><strong><a name="item__2flocal_2fperl586_2fshare_2fspamassassin">/local/perl586/share/spamassassin</a></strong><br />
</dt>
<dt><strong>/local/perl586/share/spamassassin</strong><br />
</dt>
<dt><strong><a name="item__2fusr_2flocal_2fshare_2fspamassassin">/usr/local/share/spamassassin</a></strong><br />
</dt>
<dt><strong><a name="item__2fusr_2fshare_2fspamassassin">/usr/share/spamassassin</a></strong><br />
</dt>
</dl>
<p>Site-specific configuration data is used to override any values which had
already been set.  This is loaded from the first existing directory in:</p>
<dl>
<dt><strong><a name="item__2flocal_2fperl586_2fetc_2fmail_2fspamassassin">/local/perl586/etc/mail/spamassassin</a></strong><br />
</dt>
<dt><strong>/local/perl586/etc/mail/spamassassin</strong><br />
</dt>
<dt><strong><a name="item__2flocal_2fperl586_2fetc_2fspamassassin">/local/perl586/etc/spamassassin</a></strong><br />
</dt>
<dt><strong><a name="item__2fusr_2flocal_2fetc_2fspamassassin">/usr/local/etc/spamassassin</a></strong><br />
</dt>
<dt><strong><a name="item__2fusr_2fpkg_2fetc_2fspamassassin">/usr/pkg/etc/spamassassin</a></strong><br />
</dt>
<dt><strong><a name="item__2fusr_2fetc_2fspamassassin">/usr/etc/spamassassin</a></strong><br />
</dt>
<dt><strong><a name="item__2fetc_2fmail_2fspamassassin">/etc/mail/spamassassin</a></strong><br />
</dt>
<dt><strong><a name="item__2fetc_2fspamassassin">/etc/spamassassin</a></strong><br />
</dt>
</dl>
<p>From those three directories, SpamAssassin will first read files ending in
``.pre'' in lexical order and then it will read files ending in ``.cf'' in
lexical order (most files begin with two numbers to make the sorting
order obvious).</p>
<p>In other words, it will read <em>init.pre</em> first, then <em>10_default_prefs.cf</em> before
<em>50_scores.cf</em> and <em>20_body_tests.cf</em> before <em>20_head_tests.cf</em>.
Options in later files will override earlier files.</p>
<p>Individual user preferences are loaded from the location specified on
the <code>spamassassin</code>, <code>sa-learn</code>, or <code>spamd</code> command line (see respective
manual page for details).  If the location is not specified,
<em>~/.spamassassin/user_prefs</em> is used if it exists.  SpamAssassin will
create that file if it does not already exist, using
<em>user_prefs.template</em> as a template.  That file will be looked for in:</p>
<dl>
<dt><strong>/local/perl586/etc/mail/spamassassin</strong><br />
</dt>
<dt><strong>/local/perl586/etc/mail/spamassassin</strong><br />
</dt>
<dt><strong>/local/perl586/share/spamassassin</strong><br />
</dt>
<dt><strong>/etc/spamassassin</strong><br />
</dt>
<dt><strong>/etc/mail/spamassassin</strong><br />
</dt>
<dt><strong>/usr/local/share/spamassassin</strong><br />
</dt>
<dt><strong>/usr/share/spamassassin</strong><br />
</dt>
</dl>
<p>
</p>
<hr />
<h1><a name="tagging">TAGGING</a></h1>
<p>The following two sections detail the default tagging and markup that
takes place for messages when running <code>spamassassin</code> or <code>spamc</code> with
<code>spamd</code> in the default configuration.</p>
<p>Note: before header modification and addition, all headers beginning
with <code>X-Spam-</code> are removed to prevent spammer mischief and also to
avoid potential problems caused by prior invocations of SpamAssassin.</p>
<p>
</p>
<h2><a name="tagging_for_spam_mails">TAGGING FOR SPAM MAILS</a></h2>
<p>By default, all messages with a calculated score of 5.0 or higher are
tagged as spam.</p>
<p>If an incoming message is tagged as spam, instead of modifying the
original message, SpamAssassin will create a new report message and
attach the original message as a message/rfc822 MIME part (ensuring the
original message is completely preserved and easier to recover).</p>
<p>The new report message inherits the following headers (if they are
present) from the original spam message:</p>
<dl>
<dt><strong><a name="item_from_3a_header">From: header</a></strong><br />
</dt>
<dt><strong><a name="item_to_3a_header">To: header</a></strong><br />
</dt>
<dt><strong><a name="item_cc_3a_header">Cc: header</a></strong><br />
</dt>
<dt><strong><a name="item_subject_3a_header">Subject: header</a></strong><br />
</dt>
<dt><strong><a name="item_date_3a_header">Date: header</a></strong><br />
</dt>
<dt><strong><a name="item_message_2did_3a_header">Message-ID: header</a></strong><br />
</dt>
</dl>
<p>The above headers can be modified if the relevant <code>rewrite_header</code>
option is given (see <code>Mail::SpamAssassin::Conf</code> for more information).</p>
<p>By default these message headers are added to spam:</p>
<dl>
<dt><strong><a name="item_x_2dspam_2dflag_3a_header">X-Spam-Flag: header</a></strong><br />
</dt>
<dd>
Set to <code>YES</code>.
</dd>
<p></p></dl>
<p>The headers that added are fully configurable via the <code>add_header</code>
option (see <code>Mail::SpamAssassin::Conf</code> for more information).</p>
<dl>
<dt><strong><a name="item_spam_mail_body_text">spam mail body text</a></strong><br />
</dt>
<dd>
The SpamAssassin report is added to top of the mail message body,
if the message is marked as spam.
</dd>
<p></p></dl>
<p>
</p>
<h2><a name="default_tagging_for_all_mails">DEFAULT TAGGING FOR ALL MAILS</a></h2>
<p>These headers are added to all messages, both spam and ham (non-spam).</p>
<dl>
<dt><strong><a name="item_x_2dspam_2dchecker_2dversion_3a_header">X-Spam-Checker-Version: header</a></strong><br />
</dt>
<dd>
The version and subversion of SpamAssassin and the host where
SpamAssassin was run.
</dd>
<p></p>
<dt><strong><a name="item_x_2dspam_2dlevel_3a_header">X-Spam-Level: header</a></strong><br />
</dt>
<dd>
A series of ``*'' charactes where each one represents a full score point.
</dd>
<p></p>
<dt><strong><a name="item_x_2dspam_2dstatus_3a_header">X-Spam-Status: header</a></strong><br />
</dt>
<dd>
A string, <code>(Yes|No), score=nn required=nn tests=xxx,xxx
autolearn=(ham|spam|no|unavailable|failed)</code> is set in this header to
reflect the filter status.  For the first word, ``Yes'' means spam and
``No'' means ham (non-spam).
</dd>
<p></p></dl>
<p>The headers that added are fully configurable via the <code>add_header</code>
option (see <code>Mail::SpamAssassin::Conf</code> for more information).</p>
<p>
</p>
<hr />
<h1><a name="installation">INSTALLATION</a></h1>
<p>The <strong>spamassassin</strong> command is part of the <strong>Mail::SpamAssassin</strong> Perl module.
Install this as a normal Perl module, using <code>perl -MCPAN -e shell</code>, or by
hand.</p>
<p>Note that it is not possible to use the <code>PERL5LIB</code> environment variable
to affect where SpamAssassin finds its perl modules, due to limitations
imposed by perl's ``taint'' security checks.</p>
<p>For further details on how to install, please read the <code>INSTALL</code> file
from the SpamAssassin distribution.</p>
<p>
</p>
<hr />
<h1><a name="developer_documentation">DEVELOPER DOCUMENTATION</a></h1>
<pre>
    Mail::SpamAssassin
        Spam detector and markup engine</pre>
<pre>
    Mail::SpamAssassin::ArchiveIterator
        find and process messages one at a time</pre>
<pre>
    Mail::SpamAssassin::AutoWhitelist
        auto-whitelist handler for SpamAssassin</pre>
<pre>
    Mail::SpamAssassin::Bayes
        determine spammishness using a Bayesian classifier</pre>
<pre>
    Mail::SpamAssassin::BayesStore
        Bayesian Storage Module</pre>
<pre>
    Mail::SpamAssassin::BayesStore::SQL
        SQL Bayesian Storage Module Implementation</pre>
<pre>
    Mail::SpamAssassin::Conf::LDAP
        load SpamAssassin scores from LDAP database</pre>
<pre>
    Mail::SpamAssassin::Conf::Parser
        parse SpamAssassin configuration</pre>
<pre>
    Mail::SpamAssassin::Conf::SQL
        load SpamAssassin scores from SQL database</pre>
<pre>
    Mail::SpamAssassin::Message
        decode, render, and hold an RFC-2822 message</pre>
<pre>
    Mail::SpamAssassin::Message::Metadata
        extract metadata from a message</pre>
<pre>
    Mail::SpamAssassin::Message::Node
        decode, render, and make available MIME message parts</pre>
<pre>
    Mail::SpamAssassin::PerMsgLearner
        per-message status (spam or not-spam)</pre>
<pre>
    Mail::SpamAssassin::PerMsgStatus
        per-message status (spam or not-spam)</pre>
<pre>
    Mail::SpamAssassin::PersistentAddrList
        persistent address list base class</pre>
<pre>
    Mail::SpamAssassin::Plugin
        SpamAssassin plugin base class</pre>
<pre>
    Mail::SpamAssassin::Plugin::Hashcash
        perform hashcash verification tests</pre>
<pre>
    Mail::SpamAssassin::Plugin::RelayCountry
        add message metadata indicating the country code of each relay</pre>
<pre>
    Mail::SpamAssassin::Plugin::SPF
        perform SPF verification tests</pre>
<pre>
    Mail::SpamAssassin::Plugin::URIDNSBL
        look up URLs against DNS blocklists</pre>
<pre>
    Mail::SpamAssassin::SQLBasedAddrList
        SpamAssassin SQL Based Auto Whitelist</pre>
<p>
</p>
<hr />
<h1><a name="bugs">BUGS</a></h1>
<p>See &lt;http://issues.apache.org/SpamAssassin/&gt;</p>
<p>
</p>
<hr />
<h1><a name="authors">AUTHORS</a></h1>
<p>The <code>SpamAssassin(tm)</code> Project &lt;http://spamassassin.apache.org/&gt;</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>SpamAssassin is distributed under the Apache License, Version 2.0, as
described in the file <code>LICENSE</code> included with the distribution.</p>

</body>

</html>
